(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41ad831f"],{"0798":function(t,e,o){"use strict";var i=o("5530"),s=o("ade3"),l=(o("caad"),o("0c18"),o("10d2")),a=o("afdd"),n=o("9d26"),r=o("f2e7"),c=o("7560"),d=o("f40d"),u=o("58df"),h=o("d9bd");e["a"]=Object(u["a"])(l["a"],r["a"],d["a"]).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:Object(s["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(a["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(n["a"],{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(n["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=Object(i["a"])(Object(i["a"])({},l["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||c["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(h["a"])("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},"0c18":function(t,e,o){},"1a33":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{staticClass:"mx-auto",attrs:{flat:""}},[0==t.bbs_logs.length?o("v-card-text",[o("v-alert",{attrs:{type:"success",border:"top","colored-border":"",elevation:"2"}},[t._v("開始進行BBS Taiwan之旅")])],1):t._e(),t.bbs_logs?o("v-list",[t._l(t.bbs_logs,(function(e){return[o("v-list-item",{key:e.id},[o("v-list-item-avatar",{attrs:{size:"24"},on:{click:function(o){return t.editlog(e)}}},[o("v-icon",{attrs:{color:"blue-grey"}},[t._v(t._s(t.icons.mdiPencil)+" ")])],1),o("v-list-item-content",[o("v-list-item-title",[o("span",{staticClass:"text-h6 mr-5"},[t._v(t._s(t.getname(e.plot,"name")))]),o("span",{staticClass:"subtitle-1 mr-5"},[t._v("第 "+t._s(e.lno)+" 次")])]),o("v-list-item-subtitle",[t._v(" "+t._s(e.date)+" ")])],1),o("v-list-item-action",[o("v-btn",{attrs:{icon:"",color:"blue-grey",to:{name:"子樣區列表",params:{logid:e.id}}}},[o("v-icon",[t._v(t._s(t.icons.mdiArrowRight))])],1)],1)],1),o("v-divider")]}))],2):t._e(),o("v-bottom-sheet",{scopedSlots:t._u([t.plots.length>0?{key:"activator",fn:function(e){e.on,e.attrs;return[o("v-btn",{attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"blue-grey"},on:{click:t.addlog}},[o("v-icon",[t._v(t._s(t.icons.mdiPlus))])],1)]}}:null],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-sheet",[o("v-toolbar",{attrs:{color:"blue-grey lighten-1",dark:"",dense:""}},[o("v-toolbar-title",[t._v(" "+t._s(""==t.log.id?"新增":"編輯")+"旅次記錄")]),o("v-spacer"),o("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[o("v-icon",[t._v(t._s(t.icons.mdiClose))])],1)],1),o("v-container",{attrs:{fluid:""}},[o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-select",{attrs:{label:"樣區",items:t.plots,"item-text":"name","item-value":"id",disabled:""!=t.log.id,dense:"","menu-props":"auto"},model:{value:t.log.plot,callback:function(e){t.$set(t.log,"plot",e)},expression:"log.plot"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{type:"date",label:"調查日期",dense:""},model:{value:t.log.date,callback:function(e){t.$set(t.log,"date",e)},expression:"log.date"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-select",{attrs:{items:t.idnamelist(t.wind),"item-text":"name","item-value":"id",label:"風速",dense:"","menu-props":"auto"},model:{value:t.log.wind,callback:function(e){t.$set(t.log,"wind",e)},expression:"log.wind"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-select",{attrs:{items:t.idnamelist(t.weather),"item-text":"name","item-value":"id",label:"天氣",dense:""},model:{value:t.log.weather,callback:function(e){t.$set(t.log,"weather",e)},expression:"log.weather"}})],1),o("v-col",{attrs:{cols:"3"}},[o("v-select",{attrs:{items:[1,2,3,4,5,6,7,8,9,10,11,12],label:"旅次",dense:"","menu-props":"auto"},model:{value:t.log.lno,callback:function(e){t.$set(t.log,"lno",e)},expression:"log.lno"}})],1),o("v-col",{attrs:{cols:"9"}},[o("v-text-field",{attrs:{label:"參與人員",dense:""},model:{value:t.log.member,callback:function(e){t.$set(t.log,"member",e)},expression:"log.member"}})],1)],1),o("v-row",[""==t.log.id?o("v-col",[o("v-btn",{attrs:{block:"",dark:"",color:"green"},on:{click:t.createlog}},[t._v("新增")])],1):t._e(),""!=t.log.id?o("v-col",[o("v-btn",{attrs:{block:"",dark:"",color:"red"},on:{click:function(e){return t.dellog(t.log.id)}}},[t._v("刪除")])],1):t._e(),""!=t.log.id?o("v-col",[o("v-btn",{attrs:{block:"",dark:"",color:"green"},on:{click:t.changelog}},[t._v("存檔")])],1):t._e()],1)],1)],1)],1)],1)},s=[],l=o("5530"),a=(o("d81d"),o("4fad"),o("7db0"),o("c740"),o("159b"),o("2f62")),n=o("94ed"),r={name:"List",data:function(){return{icons:{mdiPlus:n["x"],mdiPencil:n["v"],mdiArrowRight:n["c"],mdiClose:n["f"]},loglist:[],log:{id:"",lno:1,date:"",weather:"",wind:0,member:""},dialog:!1}},computed:Object(l["a"])(Object(l["a"])({},Object(a["e"])(["weather","wind"])),Object(a["c"])({plots:"getPlot",bbs_logs:"getBbs_log",bbs_log_dtl:"getBbs_log_dtl",bird_log:"getBbs_log_bird",create_log:"getBbs_logSelected",create_plot:"getPlotSelected",plot_dtl:"getPlot_dtl"})),mounted:function(){this.$store.dispatch("bbs_logSetFilter",{}),this.$store.dispatch("bbs_logSetSort",{sort:"create_date",reverse:!0}),0==this.plots.length&&this.$router.push({name:"樣區設定"})},methods:Object(l["a"])(Object(l["a"])({},Object(a["b"])(["plot_dtlSetFilter","bbs_logAdd"])),{},{idnamelist:function(t){return Object.entries(t).map((function(t){return{id:t[0],name:t[0]+" "+t[1]}}))},getname:function(t,e){var o=this.plots.find((function(e){return e.id==t}));return o[e]},newlog:function(){var t=new Date;this.log.plot=this.plots[0].id,this.log.date=this.$moment(t).format("YYYY-MM-DD"),this.log.weather="A",this.log.wind="0",this.log.member="",this.log.lno=1,this.log.id=""},addlog:function(){this.newlog(),this.dialog=!0},createlog:function(){var t=this,e=(new Date).valueOf(),o=this.bbs_logs.findIndex((function(e){return e["plot"]==t.log.plot&&e["date"]==t.log.date&&e["lno"]==t.log.lno}));o>-1||(this.log.create_date=e,this.log.update_date=e,this.$store.dispatch("bbs_logAdd",this.log),this.$store.dispatch("bbs_logSelect",{id:this.bbs_logs[0].id}),this.$store.dispatch("plotSelect",{id:this.create_log.plot}),this.$store.dispatch("plot_dtlSetFilter",{plot:this.create_plot.id}),this.plot_dtl.forEach((function(o){return t.$store.dispatch("bbs_log_dtlAdd",{log_id:t.create_log.id,plot_dtl:o.id,wind:t.create_log.wind,weather:t.create_log.weather,create_date:(new Date).valueOf(),update_date:e})}))),this.dialog=!1},editlog:function(t){this.log=Object.assign({},t),this.dialog=!0},changelog:function(){var t=this,e=(new Date).valueOf();this.$store.dispatch("bbs_log_dtlSetFilter",{log_id:this.log.id}),this.bbs_log_dtl.forEach((function(o){if(o.update_date==t.log.update_date){var i=Object.assign({},o,{wind:t.log.wind,weather:t.log.weather,update_date:e});t.$store.dispatch("bbs_log_dtlUpdate",i)}})),this.log.update_date=e,this.$store.dispatch("bbs_logUpdate",this.log),this.dialog=!1},dellog:function(){var t=this;0!=confirm("確定刪除此記錄?")&&(this.$store.dispatch("bbs_log_dtlSetFilter",{log_id:this.log.id}),this.bbs_log_dtl.forEach((function(e){t.$store.dispatch("bbs_log_birdSetFilter",{log_dtl:e.id}),t.bird_log.forEach((function(e){t.$store.dispatch("bbs_log_birdRemove",e)})),t.$store.dispatch("bbs_log_dtlRemove",e)})),this.$store.dispatch("bbs_logRemove",this.log),this.dialog=!1)}})},c=r,d=o("2877"),u=o("6544"),h=o.n(u),g=o("0798"),b=o("288c"),v=o("8336"),p=o("b0af"),_=o("99d9"),m=o("62ad"),f=o("a523"),w=o("ce7e"),$=o("132d"),x=o("8860"),k=o("da13"),S=o("1800"),C=o("8270"),y=o("5d23"),B=o("0fd9"),O=o("b974"),V=o("8dd9"),j=o("2fa4"),I=o("8654"),A=o("71d9"),E=o("2a7f"),D=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=D.exports;h()(D,{VAlert:g["a"],VBottomSheet:b["a"],VBtn:v["a"],VCard:p["a"],VCardText:_["b"],VCol:m["a"],VContainer:f["a"],VDivider:w["a"],VIcon:$["a"],VList:x["a"],VListItem:k["a"],VListItemAction:S["a"],VListItemAvatar:C["a"],VListItemContent:y["a"],VListItemSubtitle:y["b"],VListItemTitle:y["c"],VRow:B["a"],VSelect:O["a"],VSheet:V["a"],VSpacer:j["a"],VTextField:I["a"],VToolbar:A["a"],VToolbarTitle:E["a"]})},"288c":function(t,e,o){"use strict";var i=o("5530"),s=(o("a9e3"),o("d0cd"),o("169a"));e["a"]=s["a"].extend({name:"v-bottom-sheet",props:{inset:Boolean,maxWidth:{type:[String,Number],default:"auto"},transition:{type:String,default:"bottom-sheet-transition"}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-bottom-sheet":!0,"v-bottom-sheet--inset":this.inset})}}})},"99d9":function(t,e,o){"use strict";o.d(e,"a",(function(){return l})),o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return r}));var i=o("b0af"),s=o("80d2"),l=Object(s["g"])("v-card__actions"),a=Object(s["g"])("v-card__subtitle"),n=Object(s["g"])("v-card__text"),r=Object(s["g"])("v-card__title");i["a"]},afdd:function(t,e,o){"use strict";var i=o("8336");e["a"]=i["a"]},d0cd:function(t,e,o){},f40d:function(t,e,o){"use strict";var i=o("2b0e");e["a"]=i["a"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})}}]);
//# sourceMappingURL=chunk-41ad831f.de9b1684.js.map