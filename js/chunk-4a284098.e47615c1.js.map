{"version":3,"sources":["webpack:///./src/views/Map.vue?43e6","webpack:///src/views/Map.vue","webpack:///./src/views/Map.vue?160c","webpack:///./src/views/Map.vue","webpack:///./node_modules/core-js/modules/es.object.entries.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","$router","back","_v","_s","icons","mdiArrowLeft","plot","id","name","directives","rawName","value","expression","ref","staticStyle","zoom","center","mapOptions","zoomUpdate","url","attribution","_l","item","key","getlatlng","permanent","interactive","pno","_e","staticRenderFns","iconRetinaUrl","iconUrl","shadowUrl","components","LMap","LTileLayer","LMarker","LTooltip","data","computed","created","plotid","$route","params","$store","dispatch","methods","idnamelist","Object","entries","obj","map","currentZoom","centerUpdate","currentCenter","onResize","$refs","mapObject","_onResize","convertlatlng","component","VApp","VAppBar","VAppBarNavIcon","VIcon","VMain","VToolbarTitle","VToolbar","Resize","$","$entries","target","stat","O"],"mappings":"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","file":"js/chunk-4a284098.e47615c1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.plot)?_c('v-app',[_c('v-app-bar',{attrs:{\"app\":\"\",\"color\":\"blue-grey\",\"dark\":\"\",\"dense\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){return _vm.$router.back()}}},[_c('v-icon',[_vm._v(_vm._s(_vm.icons.mdiArrowLeft))])],1),_c('v-toolbar-title',[_vm._v(\" \"+_vm._s(_vm.plot.id)+\" \"+_vm._s(_vm.plot.name)+\" 預覽\")])],1),_c('v-main',[_c('l-map',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.onResize),expression:\"onResize\"}],ref:\"map\",staticStyle:{\"min-height\":\"400px\"},attrs:{\"zoom\":_vm.zoom,\"center\":_vm.center,\"options\":_vm.mapOptions},on:{\"update:zoom\":_vm.zoomUpdate}},[_c('l-tile-layer',{attrs:{\"url\":_vm.url,\"attribution\":_vm.attribution}}),_vm._l((_vm.plot_dtl),function(item){return [_c('l-marker',{key:item.id,attrs:{\"lat-lng\":_vm.getlatlng(item),\"name\":item.id}},[_c('l-tooltip',{attrs:{\"options\":{ permanent: true, interactive: true }}},[_vm._v(\"樣點 \"+_vm._s(item.pno))])],1)]})],2)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\nv-app(v-if=\"plot\")\n  v-app-bar(app, color=\"blue-grey\", dark, dense)\n    v-app-bar-nav-icon(@click=\"$router.back()\")\n      v-icon {{ icons.mdiArrowLeft}}\n    v-toolbar-title  {{ plot.id}} {{ plot.name }} 預覽\n  v-main\n    l-map(\n      ref=\"map\" \n      v-resize=\"onResize\"\n      :zoom=\"zoom\"\n      :center=\"center\"\n      :options=\"mapOptions\"\n      style=\"min-height: 400px;\"\n      @update:zoom=\"zoomUpdate\"\n    )\n      l-tile-layer(:url=\"url\" :attribution=\"attribution\")\n      template(v-for=\"item in plot_dtl\")\n        l-marker( :key=\"item.id\", :lat-lng=\"getlatlng(item)\" :name=\"item.id\")                 \n          l-tooltip(:options=\"{ permanent: true, interactive: true }\") 樣點 {{ item.pno}}\n\n</template>\n<script>\nimport { mdiArrowLeft, mdiPencil, mdiDelete, mdiEye } from '@mdi/js'\nimport { mapState, mapGetters } from 'vuex'\nimport { latLng } from 'leaflet'\nimport { LMap, LTileLayer, LMarker, LTooltip } from 'vue2-leaflet'\nimport 'leaflet/dist/leaflet.css'\nimport { Icon } from 'leaflet'\n\ndelete Icon.Default.prototype._getIconUrl\nIcon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n})\n\nexport default {\n  name: 'Map',\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n    LTooltip\n  },\n  data: () => ({\n    icons: {\n      mdiArrowLeft,\n      mdiPencil,\n      mdiDelete,\n      mdiEye\n    },\n    plotid: '',\n    zoom: 16,\n    center: null,\n    //url: 'https://www.google.com/maps/vt?lyrs=m@189&&x={x}&y={y}&z={z}',\n    url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    //url:'https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',\n    attribution:\n      '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    currentZoom: 11.5,\n    showParagraph: false,\n    yourposition: null,\n    mapOptions: {\n      zoomSnap: 0.5\n    }\n  }),\n  computed: {\n    ...mapState(['plottype', 'watertype']),\n    ...mapGetters({\n      plot: 'getPlotSelected',\n      plot_dtl: 'getPlot_dtl',\n      bbs_log: 'getBbs_logFiltered',\n      bbs_log_dtl: 'getBbs_log_dtlFiltered',\n      bird_log: 'getBbs_log_birdFiltered'\n    })\n  },\n  created() {\n    this.plotid = this.$route.params.plotid\n    this.$store.dispatch('plotSelect', { id: this.plotid })\n    this.$store.dispatch('plot_dtlSetFilter', { plot: this.plotid })\n    this.$store.dispatch('plot_dtlSetFilter', { plot: this.plotid })\n    this.center = this.getlatlng(\n      this.plot_dtl[parseInt(this.plot_dtl.length / 2)]\n    )\n  },\n  methods: {\n    idnamelist(obj) {\n      return Object.entries(obj).map(item => ({\n        id: item[0],\n        name: item[0] + ' ' + item[1]\n      }))\n    },\n    zoomUpdate(zoom) {\n      this.currentZoom = zoom\n    },\n    centerUpdate(center) {\n      this.currentCenter = center\n    },\n    onResize() {\n      this.$refs.map.mapObject._onResize()\n    },\n    convertlatlng(data) {\n      let tmp = data.split(/°|'|\"/)\n      return (\n        parseInt(tmp[0]) + parseInt(tmp[1]) / 60 + parseFloat(tmp[2]) / 3600\n      )\n    },\n    getlatlng(item) {\n      return latLng(this.convertlatlng(item.lat), this.convertlatlng(item.lng))\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=ad5c09cc&lang=pug&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VIcon,VMain,VToolbarTitle})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n"],"sourceRoot":""}